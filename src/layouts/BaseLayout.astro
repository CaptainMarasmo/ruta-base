---
const {
  title = "Ruta Base",
  useVideoBg = false,
  bgImage = "/fondo.png",
} = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>

    <style>
      :root { font-family: system-ui, Arial; }
      html, body { height: 100%; }

      body{
        margin: 0;
        background: var(--bg) center/cover no-repeat fixed;
        position: relative;
        min-height: 100vh;
      }

      /* Si hay vÃ­deo en esta pÃ¡gina, quitamos la imagen */
      body[data-video="1"]{
        background: none;
      }

      /* VÃ­deo solo en Inicio cuando se active */
      #bg-video{
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      /* Capa blanca para legibilidad */
      body::before{
        content:"";
        position: fixed;
        inset: 0;
        background: rgba(255,255,255,0.65);
        pointer-events: none;
        z-index: 0;
      }

      /* Barra morada estrecha */
      header{
        position: sticky;
        top: 0;
        z-index: 2;
        overflow: visible;
        display: flex;
        justify-content: center;
      }

      @keyframes headerFlow{
        0%{ background-position: 0% 50%; }
        50%{ background-position: 100% 50%; }
        100%{ background-position: 0% 50%; }
      }

      nav{
        height: 34px;
        display: inline-flex;
        gap: 8px;
        padding: 0 10px 0 0;
        overflow: visible;
        align-items: center;
        box-sizing: border-box;
        justify-content: center;
        position: relative;
        background: linear-gradient(120deg, rgba(210, 190, 255, 0.85), rgba(190, 170, 255, 0.75), rgba(225, 205, 255, 0.9));
        background-size: 220% 220%;
        border: 1px solid rgba(130, 100, 180, 0.25);
        border-radius: 14px;
        animation: headerFlow 10s ease-in-out infinite;
      }
      /* TU ESTILO (tal cual) */
      nav a{
        display: inline-block;
        text-decoration: none;
        color: #1a0b2e;
        padding: 0 12px;
        border-radius: 8px;
        white-space: nowrap;
        font-weight: 700;
        font-size: 16px;
        line-height: 34px;
      }
      .navHidden{
        display: none !important;
      }

      nav a:hover{
        background: rgba(255,255,255,0.35);
      }

      main{
        position: relative;
        z-index: 1;
        padding: 18px 14px;
        max-width: 1100px;
        margin: 0 auto;
      }

      .muted{ color:#666; font-size:14px; }
      .grid{ display:grid; gap:14px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
      .card{ border:1px solid #eee; border-radius:14px; padding:14px; background: rgba(255,255,255,0.75); }
      .titleRow{
        display: block !important;
        position: relative !important;
        gap: 12px;
        flex-wrap: wrap;
        padding-top: 2px;
        width: 100%;
      }
      .titleNav{
        display: flex;
        gap: 8px;
        align-items: center;
        position: absolute !important;
        top: -10px !important;
        right: 0 !important;
        white-space: nowrap;
      }
      .titleNav a{
        text-decoration: none !important;
      }
      .titleArrow{
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 52px;
        height: 52px;
        border-radius: 999px;
        text-decoration: none !important;
        border-bottom: 0 !important;
        box-shadow: 0 4px 10px rgba(0,0,0,0.12);
        color: #1a0b2e;
        font-weight: 900;
        font-size: 34px !important;
        line-height: 1;
        border: 1px solid rgba(0,0,0,0.12);
        background: rgba(255,255,255,0.75);
        transform: scale(1.05);
      }
      .titleArrow:hover{
        background: rgba(155,120,255,0.18);
      }
      :global(.flag-badge){
        width: 1em;
        height: 1em;
        display: inline-block;
        border-radius: 3px;
        object-fit: cover;
        border: 1px solid rgba(0,0,0,0.15);
        background: var(--flag, #eaeaea);
        box-shadow: 0 1px 3px rgba(0,0,0,0.15);
        vertical-align: -0.1em;
        margin-left: 6px;
      }\r\n\r\n      :global(img.flag-badge){\r\n        width: 1.6em;\r\n        height: 1em;\r\n        object-fit: contain;\r\n        display: inline-block;\r\n        background: transparent;\r\n        border: 0;\r\n        box-shadow: none;\r\n      }
    </style>
  </head>

  <body data-video={useVideoBg ? "1" : "0"} style={`--bg: url('${bgImage}')`}>
    {useVideoBg && (
      <video id="bg-video" autoplay muted loop playsinline preload="auto">
        <source src="/fondo.mp4" type="video/mp4" />
      </video>
    )}

    <header>
      <nav>
        <a href="/">Inicio</a>
        <a href="/viajes">Viajes</a>
        <a href="/mapas">Mapas</a>
        <a href="/consejos">Consejos</a>
        <a href="/galeria">Galería</a>
        <a href="/sobre">Sobre mí</a>
        <a href="/ev" class="navHidden">EV</a>
        <a href="/msfs" class="navHidden">Vuelo Virtual</a>
        <a href="/chat" class="navHidden">Chat</a>
        <a href="/registro" class="navHidden">Regístrate</a>
      </nav>
    </header>

    <main>
      <slot />
    </main>
  </body>
</html>











